function News(){this.progressGroup=$("#progress-group")}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var o=$("#thumbnail-btn");o.change(function(){var e=o[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenQiniuUploadFileEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var i=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){for(var t=e.data.token,o=0;o<=i.name.split(".").length;o++)if(o===i.name.split(".").length)var n=(new Date).getTime()+"."+i.name.split(".")[o];var r={fname:n,params:{},mimeType:["image/png","video/x-ms-wmv","image/jpeg","audio/mp3","audio/mpeg"]},a={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(i,n,t,r,a).subscribe({next:s.updateUploadProgress,error:s.uploadErrorEvent,complete:s.complateUploadEvent})}}})})},News.prototype.updateUploadProgress=function(e){var t=e.total.percent,o=t.toFixed(0)+"%";News.progressGroup.show();var n=$(".progress-bar");100===t&&(n.removeAttr("style",1),n.removeAttr().val()),n.css({width:o}),n.text(o)},News.prototype.uploadErrorEvent=function(e){window.messageBox.showError(e.message),$("#progress-group").hide()},News.prototype.complateUploadEvent=function(e){var t="http://q2yx3wc2f.bkt.clouddn.com/"+e.key;$("#thumbnail-form").val(t),$("#progress-group").hide()},News.prototype.listensubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),o=$("input[name='title']").val(),n=$("select[name='category']").val(),r=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),i=window.ue.getContent(),s="";s=t?"/cms/edit_news/":"/cms/news_release/",xfzajax.post({url:s,data:{title:o,category:n,desc:r,thumbnail:a,content:i,pk:t},success:function(e){200===e.code&&(t?xfzalert.alertSuccess("新闻编辑成功! ",function(){window.location.reload()}):xfzalert.alertSuccess("新闻添加成功！ ",function(){window.location.reload()}))}})})},News.prototype.run=function(){var e=this;e.initUEditor(),e.listensubmitEvent(),e.listenUploadFileEvent()},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInRoaXMiLCJwcm9ncmVzc0dyb3VwIiwiJCIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsImxpc3RlblFpbml1VXBsb2FkRmlsZUV2ZW50Iiwic2VsZiIsImdldCIsInRva2VuIiwiaSIsIm5hbWUiLCJzcGxpdCIsImxlbmd0aCIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejIiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwidXBkYXRlVXBsb2FkUHJvZ3Jlc3MiLCJlcnJvciIsInVwbG9hZEVycm9yRXZlbnQiLCJjb21wbGV0ZSIsImNvbXBsYXRlVXBsb2FkRXZlbnQiLCJyZXNwb25zZSIsInBlcmNlbnQiLCJ0b3RhbCIsInBlcmNlbnRUZXh0IiwidG9GaXhlZCIsInNob3ciLCJwcm9ncmVzc0JhciIsInJlbW92ZUF0dHIiLCJjc3MiLCJ3aWR0aCIsInRleHQiLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImhpZGUiLCJ0aHVtYm5haWxVcmwiLCJsaXN0ZW5zdWJtaXRFdmVudCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwiYXR0ciIsInRpdGxlIiwiY2F0ZWdvcnkiLCJkZXNjIiwidGh1bWJuYWlsIiwiY29udGVudCIsImdldENvbnRlbnQiLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUNMQyxLQUFLQyxjQUFnQkMsRUFBRSxtQkFHM0JILEtBQUtJLFVBQVVDLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBVSxDQUMvQkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUtyQlgsS0FBS0ksVUFBVVEsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlWLEVBQUUsa0JBQ2xCVSxFQUFVQyxPQUFPLFdBQ2IsSUFBSUMsRUFBT0YsRUFBVSxHQUFHRyxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBRVJPLGFBQWUsRUFFZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FFeEIsSUFBSUwsRUFBTUssRUFBYSxLQUFPLElBQ1R4QixFQUFFLG1CQUNSeUIsSUFBSU4sVUFRdkN0QixLQUFLSSxVQUFVeUIsMkJBQTZCLFdBQ3hDLElBQUlDLEVBQU83QixLQUNLRSxFQUFFLGtCQUNSVyxPQUFPLFdBQ2IsSUFBSUMsRUFBT2QsS0FBS2UsTUFBTSxHQUN0QkksUUFBUVcsSUFBSSxDQUNSVCxJQUFPLGdCQUNQSSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FFeEIsSUFEQSxJQUFJSyxFQUFRTCxFQUFhLEtBQVMsTUFDekJNLEVBQUksRUFBR0EsR0FBS2xCLEVBQUttQixLQUFLQyxNQUFNLEtBQUtDLE9BQVFILElBQzlDLEdBQUlBLElBQU1sQixFQUFLbUIsS0FBS0MsTUFBTSxLQUFLQyxPQUMzQixJQUFJQyxHQUFNLElBQUtDLE1BQVFDLFVBQVksSUFBTXhCLEVBQUttQixLQUFLQyxNQUFNLEtBQUtGLEdBR3RFLElBQUlPLEVBQVcsQ0FDWEMsTUFBT0osRUFDUEssT0FBUSxHQUNSQyxTQUFVLENBQUMsWUFBYSxpQkFBa0IsYUFBYyxZQUFhLGVBR3JFQyxFQUFTLENBRVRDLGNBQWMsRUFFZEMsV0FBWSxFQUVaQyxPQUFRQyxNQUFNRCxPQUFPRSxJQUVSRCxNQUFNRSxPQUFPbkMsRUFBTXNCLEVBQUtMLEVBQU9RLEVBQVVJLEdBQy9DTyxVQUFVLENBRWpCQyxLQUFRdEIsRUFBS3VCLHFCQUViQyxNQUFTeEIsRUFBS3lCLGlCQUVkQyxTQUFZMUIsRUFBSzJCLDZCQVF6Q3pELEtBQUtJLFVBQVVpRCxxQkFBdUIsU0FBVUssR0FDNUMsSUFFSUMsRUFEUUQsRUFBU0UsTUFDREQsUUFDaEJFLEVBQWNGLEVBQVFHLFFBQVEsR0FBSyxJQUNuQjlELEtBQUtFLGNBQ1g2RCxPQUNkLElBQUlDLEVBQWM3RCxFQUFFLGlCQUNKLE1BQVp3RCxJQUNBSyxFQUFZQyxXQUFXLFFBQVMsR0FDaENELEVBQVlDLGFBQWFyQyxPQUU3Qm9DLEVBQVlFLElBQUksQ0FBQ0MsTUFBU04sSUFDMUJHLEVBQVlJLEtBQUtQLElBR3JCN0QsS0FBS0ksVUFBVW1ELGlCQUFtQixTQUFVRCxHQUN4Q2hELE9BQU8rRCxXQUFXQyxVQUFVaEIsRUFBTWlCLFNBQ2RwRSxFQUFFLG1CQUNScUUsUUFHbEJ4RSxLQUFLSSxVQUFVcUQsb0JBQXNCLFNBQVVDLEdBQzNDLElBR0llLEVBRFMsb0NBREVmLEVBQWMsSUFHUnZELEVBQUUsbUJBQ1J5QixJQUFJNkMsR0FDQ3RFLEVBQUUsbUJBQ1JxRSxRQUdsQnhFLEtBQUtJLFVBQVVzRSxrQkFBb0IsV0FDZnZFLEVBQUUsZUFDUndFLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE0zRSxFQUFFRixNQUNDOEUsS0FBSyxnQkFDZEMsRUFBUTdFLEVBQUUsdUJBQXVCeUIsTUFDakNxRCxFQUFXOUUsRUFBRSwyQkFBMkJ5QixNQUN4Q3NELEVBQU8vRSxFQUFFLHNCQUFzQnlCLE1BQy9CdUQsRUFBWWhGLEVBQUUsMkJBQTJCeUIsTUFDekN3RCxFQUFVOUUsT0FBT0MsR0FBRzhFLGFBQ3BCL0QsRUFBTSxHQUVOQSxFQURBd0QsRUFDTSxrQkFFQSxxQkFFVjFELFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKeUQsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsRUFDWE4sR0FBTUEsR0FFVnBELFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNUbUQsRUFDQVEsU0FBU0MsYUFBYSxXQUFZLFdBQzlCakYsT0FBT2tGLFNBQVNDLFdBR3BCSCxTQUFTQyxhQUFhLFdBQVksV0FDOUJqRixPQUFPa0YsU0FBU0Msa0JBVTVDekYsS0FBS0ksVUFBVXNGLElBQU0sV0FDakIsSUFBSTVELEVBQU83QixLQUNYNkIsRUFBS3pCLGNBQ0x5QixFQUFLNEMsb0JBRUw1QyxFQUFLbEIseUJBR1RULEVBQUUsWUFDYSxJQUFJSCxNQUNWMEYsTUFDTDFGLEtBQUtFLGNBQWdCQyxFQUFFIiwiZmlsZSI6IndyaXRlX25ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3cygpIHtcbiAgICB0aGlzLnByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xufVxuXG5OZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoXCJlZGl0b3JcIiwge1xuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxuICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXG4gICAgfSk7XG59O1xuXG4vKiDlsIblm77niYfkuIrkvKDliLDoh6rlt7HnmoTmnI3liqHlmajkuIogKi9cbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcbiAgICAgICAgICAgIC8qIOWRiuiviUpRdWVyee+8jOi/meaYr+S4gOS4quaWh+S7tu+8jOS4jeaYr+S4gOS4quaZrumAmueahOaWh+acrOWtl+espuS4su+8jOS4jemcgOimgeS9oOWGjeWOu+WkhOeQhiAqL1xuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXG4gICAgICAgICAgICAvKum7mOiupOS9v+eUqOaWh+S7tueahOagvOW8jyovXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIOWmguaenOWbvueJh+S4iuS8oOaIkOWKn++8jOacjeWKoeWZqOWwseimgei/lOWbnuWbvueJh+mTvuaOpe+8jOmTvuaOpeWwseWcqGRhdGHkuK0gKi9cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcIiN0aHVtYm5haWwtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pO1xufTtcblxuLyog5bCG5Zu+54mH5LiK5Lyg5Yiw5LiD54mb5LqR5LitICovXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5RaW5pdVVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3FudG9rZW4vJyxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGZpbGUubmFtZS5zcGxpdCgnLicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogWydpbWFnZS9wbmcnLCAndmlkZW8veC1tcy13bXYnLCAnaW1hZ2UvanBlZycsICdhdWRpby9tcDMnLCAnYXVkaW8vbXBlZyddXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtaW1lVHlwZTpudWxsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiDmmK/lkKbkvb/nlKhDRE7liqDpgJ8gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUNkbkRvbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIOWmguaenOS9oOW9k+WJjee9kee7nOS4jeWlve+8jOS7luaAu+WFseWbnuWPkemAgTbmrKHor7fmsYIgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiDkuIrkvKDmlofku7bliLDpgqPkuKrnqbrpl7Qs5qC55o2u5ZCO56uv5a6a5L2N55qE56m66Ze05Zyw5Z2AICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MlxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLyog5LiK5Lyg6L+H56iL5Lit6YeN5aSN6LCD55So55qE5Ye95pWwICovXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5leHRcIjogc2VsZi51cGRhdGVVcGxvYWRQcm9ncmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIOS4iuS8oOi/h+eoi+S4reWPkeeUn+mUmeivr++8jOiwg+eUqOS4i+mdouWHveaVsO+8jOW5tuS4lOS8oOWFpeS4gOS4qumUmeivr+eahOS/oeaBryAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJlcnJvclwiOiBzZWxmLnVwbG9hZEVycm9yRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiDmlofku7bkuIrkvKDkvb/nlKjnmoTlh73mlbAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGxldGVcIjogc2VsZi5jb21wbGF0ZVVwbG9hZEV2ZW50XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5OZXdzLnByb3RvdHlwZS51cGRhdGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcbiAgICB2YXIgcGVyY2VudCA9IHRvdGFsLnBlcmNlbnQ7XG4gICAgdmFyIHBlcmNlbnRUZXh0ID0gcGVyY2VudC50b0ZpeGVkKDApICsgJyUnO1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gTmV3cy5wcm9ncmVzc0dyb3VwO1xuICAgIHByb2dyZXNzR3JvdXAuc2hvdygpO1xuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xuICAgIGlmIChwZXJjZW50ID09PSAxMDApIHtcbiAgICAgICAgcHJvZ3Jlc3NCYXIucmVtb3ZlQXR0cihcInN0eWxlXCIsIDEpO1xuICAgICAgICBwcm9ncmVzc0Jhci5yZW1vdmVBdHRyKCkudmFsKClcbiAgICB9XG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHtcIndpZHRoXCI6IHBlcmNlbnRUZXh0fSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwZXJjZW50VGV4dCk7XG59O1xuXG5OZXdzLnByb3RvdHlwZS51cGxvYWRFcnJvckV2ZW50ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gJChcIiNwcm9ncmVzcy1ncm91cFwiKTtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbn07XG5cbk5ld3MucHJvdG90eXBlLmNvbXBsYXRlVXBsb2FkRXZlbnQgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGZpbGVuYW1lID0gcmVzcG9uc2VbJ2tleSddO1xuICAgIHZhciBkb21haW4gPSBcImh0dHA6Ly9xMnl4M3djMmYuYmt0LmNsb3VkZG4uY29tL1wiO1xuICAgIHZhciB0aHVtYm5haWxVcmwgPSBkb21haW4gKyBmaWxlbmFtZTtcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xuICAgIHRodW1ibmFpbElucHV0LnZhbCh0aHVtYm5haWxVcmwpO1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gJChcIiNwcm9ncmVzcy1ncm91cFwiKTtcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcbn07XG5cbk5ld3MucHJvdG90eXBlLmxpc3RlbnN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdWJtaXRCdG4gPSAkKFwiI3N1Ym1pdC1idG5cIik7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHBrID0gYnRuLmF0dHIoXCJkYXRhLW5ld3MtaWRcIik7XG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHRodW1ibmFpbCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xuICAgICAgICB2YXIgdXJsID0gJyc7XG4gICAgICAgIGlmIChwaykge1xuICAgICAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9uZXdzLyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9uZXdzX3JlbGVhc2UvJztcbiAgICAgICAgfVxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6IHVybCxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcbiAgICAgICAgICAgICAgICAncGsnOiBwa1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmlrDpl7vnvJbovpHmiJDlip8hICcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmlrDpl7vmt7vliqDmiJDlip/vvIEgJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59O1xuXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuaW5pdFVFZGl0b3IoKTtcbiAgICBzZWxmLmxpc3RlbnN1Ym1pdEV2ZW50KCk7XG4gICAgLy8gc2VsZi5saXN0ZW5RaW5pdVVwbG9hZEZpbGVFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XG4gICAgbmV3cy5ydW4oKTtcbiAgICBOZXdzLnByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xufSk7Il19
