function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),this.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiXSwibWFwcGluZ3MiOiJBQXNCQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFjLElBQ25CRCxLQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsS0FBS0ksTUFBUSxFQUNiSixLQUFLSyxVQUFZRixFQUFFLGVBQ25CSCxLQUFLTSxXQUFhSCxFQUFF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Q0FDeEIsSUFBSUMsRUFBU0QsRUFBYSxLQUN0QkUsRUFBTUMsU0FBUyxZQUFhLENBQUNGLE9BQVVBLElBRXZDTSxFQUFnQmhFLEVBQUUscUJBQ3RCZ0UsRUFBY0MsUUFDZEQsRUFBYzNDLE9BQU9zQyxHQUNyQmhELEVBQUtDLEtBQU8sRUFDWkQsRUFBS0UsWUFBY0EsRUFDbkJpRCxFQUFHakMsU0FBUyxVQUFVTyxXQUFXQyxZQUFZLFVBQzdDMUIsRUFBS0csUUFBUWtCLGNBT2pDdEIsTUFBTUssVUFBVWtDLElBQU0sV0FDUHBELEtBQ05xRCxzQkFETXJELEtBRU5nRSw2QkFHVDdELEVBQUUsWUFDZSxJQUFJSixRQUNWcUQsT0FFSyxJQUFJdkMsT0FDVnVDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v6Z2i5ZCR5a+56LGhXG4vLzEu5re75Yqg5bGe5oCnXG4vL+mAmui/h3RoaXPlhbPplK7lrZfvvIznu5HlrprlsZ7mgKfvvIzlubbkuJTliLblrprku5bnmoTlgLxcbi8v5Y6f5Z6L6ZO+XG4vLzIu5re75Yqg5pa55rOVXG4vL+WcqEJhbm5lci5wcm90b3R5cGXkuIrnu5Hlrprmlrnms5XlsLHlj6/ku6XkuoZcblxuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xuLy8gICAgIC8vIOi/memHjOmdouWGmeeahOS7o+eggVxuLy8gICAgIC8v55u45b2T5LqOUHl0aG9u5Lit55qEX19pbml0X1/mlrnms5XnmoTku6PnoIFcbi8vICAgICBjb25zb2xlLmxvZyhcIuaehOmAoOWHveaVsFwiKTtcbi8vICAgICB0aGlzLnBlcnNvbiA9ICd4aWFvbWluZyc7XG4vLyB9XG4vL1xuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4vLyAgICAgY29uc29sZS5sb2coJ2hlbGxvJyx3b3JkKVxuLy8gfTtcbi8vXG4vLyB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuLy8gY29uc29sZS5sb2coYmFubmVyLnBlcnNvbik7XG4vLyBiYW5uZXIuZ3JlZXQoJ3hzbCcpO1xuXG5mdW5jdGlvbiBCYW5uZXIoKSB7XG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XG4gICAgdGhpcy5pbmRleCA9IDE7XG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIilcbn1cblxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50IC0gMSkuY2xvbmUoKTtcbiAgICAvLyDnrKzkuIDlvKDova7mkq3lm77mlL7lnKjmnIDlkI7pnaJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XG4gICAgLy8g5pyA5ZCO5LiA5byg6L2u5pKt5Zu+5pS+5Zyo5pyA5YmN6Z2iXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xuICAgIHRoaXMuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGggKiAoc2VsZi5iYW5uZXJDb3VudCArIDIpLCAnbGVmdCc6IC1zZWxmLmJhbm5lcldpZHRofSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmJhbm5lckNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJDb3VudCAqIDEyICsgOCAqIDIgKyAxNiAqIChzZWxmLmJhbm5lckNvdW50IC0gMSl9KVxufTtcblxuQmFubmVyLnByb3RvdHlwZS50b2dnbGVBcnJvdyA9IGZ1bmN0aW9uIChpc1Nob3cpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKGlzU2hvdykge1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuaGlkZSgpO1xuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xuICAgIH1cbn07XG5cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTggKiBzZWxmLmluZGV4fSwgNTAwKTtcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xuICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLSAxXG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSwgMjAwMCk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGggKiBzZWxmLmJhbm5lckNvdW50fSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VsZi5iYW5uZXJVbC5hbmltYXRlKHtcImxlZnRcIjogLTc5OCAqIHNlbGYuaW5kZXh9LCA1MDApO1xuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KTtcblxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VsZi5iYW5uZXJVbC5hbmltYXRlKHtcImxlZnRcIjogLTc5OCAqIHNlbGYuaW5kZXh9LCA1MDApO1xuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KVxufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsO+8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy/nrKzkuozkuKrlh73mlbDmmK/vvIzmiorpvKDmoIfku45iYW5uZXLkuIrnp7votbBcbiAgICAgICAgc2VsZi5sb29wKCk7XG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBvYmopIHtcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcImhhaGFcIik7XG4gICAgdGhpcy5pbml0QmFubmVyKCk7XG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcbiAgICB0aGlzLmxvb3AoKTtcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpXG59O1xuXG5mdW5jdGlvbiBJbmRleCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWdlID0gMjtcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XG59XG5cbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcbiAgICBsb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3c2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pO1xufTtcblxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XG4gICAgdGFiR3JvdXAuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHRoaXM6IOS7o+ihqOW9k+WJjemAieS4reeahGxp5qCH562+XG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xuICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWQsXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbXB0eTog5Y+v5Lmf5bCG5qCH562+5LiL55qE5omA5pyJ5a2Q5YWD57Sg6YO95Yig5o6JXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XG4gICAgYmFubmVyLnJ1bigpO1xuXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XG4gICAgaW5kZXgucnVuKCk7XG59KTtcblxuIl19
