function FrontBase(){}function Auth(){this.scrollWrapper=$(".scroll-wrapper"),this.maskWrapper=$(".mask-wrapper")}FrontBase.prototype.run=function(){this.ListenAuthBoxHover()},FrontBase.prototype.ListenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptcha(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenSmsCaptcha=function(){var a=$(".sms-captcha-btn"),n=$(".signup-group input[name='telephone']");a.click(function(){var t=n.val();t||messageBox.showInfo("请输入手机号码！ "),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){if(200==t.code){messageBox.showSuccess("短信验证码发送成功！ "),a.addClass("disabled");var n=60;a.unbind("click");var e=setInterval(function(){a.text(n+"s"),--n<=0&&(clearInterval(e),a.removeClass("disabled"),a.text("发送验证码"))},1e3)}},fail:function(t){console.log(t)}})})},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$("#signin-btn"),e=$("#signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var i=this,t=$(".signin-group"),o=t.find('input[name="telephone"]'),s=t.find('input[name="password"]'),r=t.find('input[name="remember"]');t.find(".submit-btn").click(function(t){t.preventDefault();var n=o.val(),e=s.val(),a=r.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:n,password:e,remember:a?1:0},success:function(t){i.hideEvent(),window.location.reload()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSignupEvent=function(){var r=this,t=$(".signup-group"),c=t.find("input[name='telephone']"),p=t.find("input[name='username']"),u=t.find("input[name='img_captcha']"),l=t.find("input[name='password1']"),h=t.find("input[name='password2']"),f=t.find("input[name='sms_captcha']");t.find(".submit-btn").click(function(t){t.preventDefault();var n=c.val(),e=p.val(),a=u.val(),i=l.val(),o=h.val(),s=f.val();xfzajax.post({url:"/account/register/",data:{telephone:n,username:e,img_captcha:a,password1:i,password2:o,sms_captcha:s},success:function(t){r.hideEvent(),window.location.reload()},fail:function(t){window.messageBox.showError("服务器内部错误！")}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getDate(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"%分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"%小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"%天前"):n.getFullYear()+"年"+n.getMonth()+"月"+n.getDay()+"日 "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJzY3JvbGxXcmFwcGVyIiwiJCIsIm1hc2tXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwiTGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlbkltZ0NhcHRjaGFFdmVudCIsImxpc3RlblNtc0NhcHRjaGEiLCJsaXN0ZW5TaWdudXBFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNtc0NhcHRjaGEiLCJ0ZWxlcGhwbmVJcHV0IiwiY2xpY2siLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJzaG93U3VjY2VzcyIsImFkZENsYXNzIiwiY291bnQiLCJ1bmJpbmQiLCJ0aW1lciIsInNldEludGVydmFsIiwidGV4dCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVDbGFzcyIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsImNzcyIsImxlZnQiLCJpbWdDYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsInNpZ25pbkdyb3VwIiwidGVsZXBob25lSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJwb3N0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJzaWdudXBHcm91cCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwic2hvd0Vycm9yIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJEYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldERhdGUiLCJ0aW1lc3RhbXAiLCJnZXRUaW1lIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLGFBb0JULFNBQVNDLE9BQ01DLEtBQ05DLGNBQWdCQyxFQUFFLG1CQURaRixLQUVORyxZQUFjRCxFQUFFLGlCQW5CekJKLFVBQVVNLFVBQVVDLElBQU0sV0FDWEwsS0FDTk0sc0JBR1RSLFVBQVVNLFVBQVVFLG1CQUFxQixXQUNyQyxJQUFJQyxFQUFVTCxFQUFFLGFBQ1pNLEVBQWNOLEVBQUUsa0JBQ3BCSyxFQUFRRSxNQUFNLFdBQ1ZELEVBQVlFLFFBQ2IsV0FDQ0YsRUFBWUcsVUFXcEJaLEtBQUtLLFVBQVVDLElBQU0sV0FDakIsSUFBSU8sRUFBT1osS0FDWFksRUFBS0Msc0JBQ0xELEVBQUtFLG9CQUNMRixFQUFLRyxvQkFDTEgsRUFBS0ksd0JBQ0xKLEVBQUtLLG1CQUNMTCxFQUFLTSxxQkFHVG5CLEtBQUtLLFVBQVVlLFVBQVksV0FDWm5CLEtBQ05HLFlBQVlPLFFBR3JCWCxLQUFLSyxVQUFVZ0IsVUFBWSxXQUNacEIsS0FDTkcsWUFBWVEsUUFHckJaLEtBQUtLLFVBQVVhLGlCQUFtQixXQUM5QixJQUFJSSxFQUFhbkIsRUFBRSxvQkFDZm9CLEVBQWdCcEIsRUFBRSx5Q0FDdEJtQixFQUFXRSxNQUFNLFdBQ2IsSUFB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bENHLFFBQVF5QyxLQUFLLENBQ1R2QyxJQUFPLHFCQUNQQyxLQUFRLENBQ0pQLFVBQWFBLEVBQ2J1RCxTQUFZQSxFQUNaQyxZQUFlQSxFQUNmQyxVQUFhQSxFQUNiQyxVQUFhQSxFQUNiQyxZQUFlQSxHQUduQm5ELFFBQVcsU0FBVUMsR0FFakJyQixFQUFLUSxZQUNMa0QsT0FBT0MsU0FBU0MsVUFFcEI3QixLQUFRLFNBQVVDLEdBQ2QwQixPQUFPNUMsV0FBVzBELFVBQVUsa0JBTTVDbEYsRUFBRSxZQUNhLElBQUlILE1BQ1ZNLFFBR1RILEVBQUUsWUFDa0IsSUFBSUosV0FDVk8sUUFHZEgsRUFBRSxXQUNNb0UsT0FBT2UsV0FDUEEsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUM1QyxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFJLFVBQ0FILEdBQVUsSUFDbkMsT0FBSUUsRUFBWSxHQUNMLEtBQ2EsSUFBYkEsR0FBbUJBLEVBQVksTUFDdENFLFFBQVV2QyxTQUFTcUMsRUFBWSxJQUN4QkUsUUFBVSxRQUNHLE1BQWJGLEdBQXdCQSxFQUFZLE9BQzNDRyxNQUFReEMsU0FBU3FDLEVBQVksR0FBSyxJQUMzQkcsTUFBUSxRQUNLLE9BQWJILEdBQTZCQSxFQUFZLFFBQ2hESSxLQUFPekMsU0FBU3FDLEVBQVksR0FBSyxHQUFLLElBQy9CSSxLQUFPLE9BRUhSLEVBQUtTLGNBS0YsSUFKRlQsRUFBS1UsV0FJVyxJQUhsQlYsRUFBS1csU0FHeUIsS0FGN0JYLEVBQUtZLFdBRXNDLElBRHpDWixFQUFLYSIsImZpbGUiOiJmcm9udF9iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOeUqOadpeWkhOeQhuWvvOiIquadoVxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xuXG59XG5cbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLkxpc3RlbkF1dGhCb3hIb3ZlcigpO1xufTtcblxuRnJvbnRCYXNlLnByb3RvdHlwZS5MaXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1dGhCb3ggPSAkKFwiLmF1dGgtYm94XCIpO1xuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoXCIudXNlci1tb3JlLWJveFwiKTtcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdXNlck1vcmVCb3guc2hvdygpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xuICAgIH0pO1xufTtcblxuLy/nlKjmnaXlpITnkIbnmbvlvZXlkozms6jlhoxcbmZ1bmN0aW9uIEF1dGgoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuc2Nyb2xsV3JhcHBlciA9ICQoJy5zY3JvbGwtd3JhcHBlcicpO1xuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XG59XG5cbkF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5Td2l0Y2hFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU2lnbmluRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYSgpO1xuICAgIHNlbGYubGlzdGVuU2lnbnVwRXZlbnQoKTtcbn07XG5cbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc21zQ2FwdGNoYSA9ICQoXCIuc21zLWNhcHRjaGEtYnRuXCIpO1xuICAgIHZhciB0ZWxlcGhwbmVJcHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhwbmVJcHV0LnZhbCgpO1xuICAgICAgICBpZiAoIXRlbGVwaG9uZSkge1xuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbygn6K+36L6T5YWl5omL5py65Y+356CB77yBICcpO1xuICAgICAgICB9XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvc21zX2NhcHRjaGEvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEgJyk7XG4gICAgICAgICAgICAgICAgICAgIHNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDYwO1xuICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgLy/lrprml7blmajlh73mlbBzZXRJbnRlcnZhbFxuICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnRleHQoY291bnQgKyAncycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnQtLSDnrYnkuo4gY291bnQgLT0xXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21zQ2FwdGNoYS50ZXh0KFwi5Y+R6YCB6aqM6K+B56CBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc2lnbmluQnRuID0gJCgnI3NpZ25pbi1idG4nKTtcbiAgICB2YXIgc2lnbnVwQnRuID0gJCgnI3NpZ251cC1idG4nKTtcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XG4gICAgc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOiAwfSlcbiAgICB9KTtcblxuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoeydsZWZ0JzogLTQwMH0pXG4gICAgfSk7XG5cbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgfSk7XG5cbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW1nQ2FwdGNoYSA9ICQoXCIuaW1nLWNhcHRjaGFcIik7XG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vL2FjY291bnQvaW1nX2NhcHRjaGEvP3JhbmRvbT0zXG4gICAgICAgIGltZ0NhcHRjaGEuYXR0cihcInNyY1wiLCBcIi9hY2NvdW50L2ltZ19jYXB0Y2hhL1wiICsgXCI/cmFuZG9tPVwiICsgTWF0aC5yYW5kb20oKSk7XG4gICAgfSk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XG4gICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKFwibGVmdFwiKTtcbiAgICAgICAgLy8gY3VycmVudExlZnTmmK/lkKvmnIlweOeahOWtl+espuS4sizmiYDku6XpnIDopoHovazmjaLkuLrmlbTmlbAs5Yik5pat5YW25q2j6LSf5oCnXG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xuICAgICAgICBpZiAoY3VycmVudExlZnQgPCAwKSB7XG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7J2xlZnQnOiAnMCd9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoeydsZWZ0JzogJy00MDBweCd9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKCdpbnB1dFtuYW1lPVwidGVsZXBob25lXCJdJyk7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKCdpbnB1dFtuYW1lPVwicGFzc3dvcmRcIl0nKTtcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoJ2lucHV0W25hbWU9XCJyZW1lbWJlclwiXScpO1xuXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAvL+S4ieebrui/kOeul+esplxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6IHJlbWVtYmVyID8gMSA6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWdudXBHcm91cCA9ICQoJy5zaWdudXAtZ3JvdXAnKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcbiAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xuICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcbiAgICB2YXIgc21zQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XG5cbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZChcIi5zdWJtaXQtYnRuXCIpO1xuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy/kuLrkuobpmLvmraJmb3Jt55qE6buY6K6k6KGM5Li6XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nQ2FwdGNoYUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHNtc19jYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xuXG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3JlZ2lzdGVyLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIOebkeWQrOS6i+S7tlxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgLy/ph43mlrDliqDovb3pobXpnaJcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcign5pyN5Yqh5Zmo5YaF6YOo6ZSZ6K+v77yBJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XG4gICAgYXV0aC5ydW4oKTtcbn0pO1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xuICAgIGZyb250QmFzZS5ydW4oKTtcbn0pO1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luZG93LnRlbXBsYXRlKSB7XG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKERhdGVWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShEYXRlVmFsdWUpO1xuICAgICAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0RGF0ZSgpOyAvL+W+l+WIsOeahOaYr+avq+enklxuICAgICAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsgLy/lvpfliLDnmoTmmK/lvZPliY3ml7bpl7TnmoTml7bpl7TmiLNcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpIC8gMTAwMDsgLy/lvpfliLDnmoTmmK/np5LmlbBcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwICogNjApIHtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzICsgJyXliIbpkp/liY0nO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBob3VycyArICcl5bCP5pe25YmNJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgKiAyNCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQgKiAzMCkge1xuICAgICAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwIC8gMjQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJyXlpKnliY0nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgbW91dGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB5ZWFyICsgJ+W5tCcgKyBtb3V0aCArICfmnIgnICsgZGF5ICsgJ+aXpSAnICsgaG91ciArICc6JyArIG1pbnV0ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7Il19
